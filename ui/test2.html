<body>
  <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
    crossorigin="anonymous"></script>
  <script>
    let rotations, translations
    let download = (filename, text) => {
      let element = document.createElement('a');
      element.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(text));
      element.setAttribute('download', filename);

      element.style.display = 'none';
      document.body.appendChild(element);

      element.click();

      document.body.removeChild(element);
    }
    $.ajax({
      url: 'log20.txt',
      success: data => {
        let csv = ""
        let logs = data.match(/lRot:\s*[0-9.]+\s*lTra:\s*\([0-9.]+, [0-9.]+\)/g)
        console.log(logs)
        let frames = logs.map(log => {
          let [angle, x, y] = log.match(/[0-9.]+/g)
          // x -= 25
          // y -= 25
          const length = Math.sqrt(x * x + y * y)
          csv+=`${angle},${length},${x},${y}\r\n`
          return {
            angle,
            length,
            x,
            y
          }
        })
        // download('rotation_data.json', JSON.stringify(frames))
        // download('rotation_data.csv', csv)
        csv = ""
        let logs2 = data.match(/fixed:\s+\([0-9.]+,\s*[0-9.]+\)/g)//fixed:  (22.44711, 43.31758)
        logs2 = logs2.map((v,k)=>frames[k].angle+logs2)
        download('fixed_data.csv',logs.reduce((prev,curr)=>prev+curr.match(/[0-9.]+/g).join()+'\r\n', ''))
      }
    })

  </script>
</body>